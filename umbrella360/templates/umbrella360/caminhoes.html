{% extends "umbrella360/report.html" %}

{% load static %}

{% block title %}Caminhões{% endblock %}

{% block content %}
    <!-- Include Plotly.js for chart rendering -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <h2>Caminhões</h2>

    <p>Este relatório apresenta as médias de consumo de combustível dos motoristas e caminhões cadastrados na Umbrella360.</p>
    <p>As médias são calculadas com base na quilometragem total percorrida e no combustível total consumido.</p>    <div class="container" style="margin-top: 24px; display: flex; align-items: flex-start; gap: 20px;">
      <!-- Left side: Truck images -->
      <div style="flex: 1;">
        <div style="margin-bottom: 20px; text-align: center;">
          <h2>Volvo</h2>
          <img src="{% static 'umbrella360/images/Volvo.png' %}" alt="Relatório Umbrella360" title="Volvo" style="max-width: 500px; border: 5px solid #c0c0c0; border-radius: 8px;">
        </div>
        <div style="text-align: center;">
          <h2>Scania</h2>
          <img src="{% static 'umbrella360/images/Scania.png' %}" alt="Relatório Umbrella360" title="Scania" style="max-width: 500px; border: 5px solid #c0c0c0; border-radius: 8px;">
        </div>
      </div>
      
      <!-- Right side: Emissions chart -->
      <div style="flex: 0 0 400px; padding: 20px;">
        <h3 style="text-align: center; margin-bottom: 15px;">Distribuição das Emissões de CO₂ por Marca</h3>
        <div style="width: 400px; height: 350px;">
          {{ grafico|safe }}
        </div>
      </div>
    </div>

    <h3>Caminhões (por maior média de consumo)</h3>
    <table border="1" cellpadding="5" cellspacing="0">
      <thead>
        <tr>
          <th>Agrupamento</th>
          <th>Marca</th>
          <th>Quilometragem Atual (km)</th>
          <th>Combustível Total (litros)</th>
          <th>Média de Consumo (km/l)</th>
          <th>Horas de Motor</th>
          <th>Velocidade Média (km/h)</th>
          <th>RPM Médio do Motor</th>
          <th>Temperatura Média (°C)</th>
          <th>Emissões de CO2 (g/km)</th>
        </tr>
      </thead>
      <tbody>
        {% for caminhao in caminhoes %}
          <tr>
            <td>{{ caminhao.agrupamento }}</td>
            <td>{{ caminhao.marca }}</td>
            <td>{{ caminhao.quilometragem }}</td>
            <td>{{ caminhao.Consumido }}</td>
            <td>{{ caminhao.Quilometragem_média }}</td>
            <td>{{ caminhao.Horas_de_motor }}</td>
            <td>{{ caminhao.Velocidade_média }}</td>
            <td>{{ caminhao.RPM_médio }}</td>
            <td>{{ caminhao.Temperatura_média }}</td>
            <td>{{ caminhao.Emissões_CO2 }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="10">Nenhum caminhão cadastrado.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>


{% endblock %}