{% extends 'umbrella360/report.html' %}
{% load static %}

{% block title %}Análise Gráfica - Umbrella360{% endblock %}

{% block header_title %}Análise Gráfica Umbrella360{% endblock %}

{% block content %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
    .header h1 {
        color: white !important;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.7) !important;
        font-weight: 700 !important;
    }
    .tagline {
        color: rgba(255,255,255,0.95) !important;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
    }
    .footer {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;
        color: white !important;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5) !important;
    }
    .footer p {
        color: rgba(255,255,255,0.95) !important;
    }
    .footer em {
        color: rgba(255,255,255,0.8) !important;
    }
</style>

<!-- Seção Principal: Emissões e Consumo -->
<section style="background: rgba(255, 255, 255, 0.98); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 10px 40px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.3);">
    <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50; text-shadow: none;">Análise por Marca</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center;">
            <h3 style="color: #27ae60; margin-bottom: 1rem; font-weight: 600;">Emissões de CO₂</h3>
            {{ grafico_emissoes|safe }}
        </div>
        <div style="text-align: center;">
            <h3 style="color: #e74c3c; margin-bottom: 1rem; font-weight: 600;">Consumo de Combustível</h3>
            {{ grafico_consumo|safe }}
        </div>
    </div>
</section>

<!-- Seção: Performance -->
<section style="background: rgba(255, 255, 255, 0.98); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 10px 40px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.3);">
    <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50; text-shadow: none;">Análise de Performance</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center;">
            <h3 style="color: #f39c12; margin-bottom: 1rem; font-weight: 600;">Eficiência Média (Km/L)</h3>
            {{ grafico_eficiencia|safe }}
        </div>
        <div style="text-align: center;">
            <h3 style="color: #9b59b6; margin-bottom: 1rem; font-weight: 600;">Distribuição de Velocidade</h3>
            {{ grafico_velocidade|safe }}
        </div>
    </div>
</section>

<!-- Seção: Análise Técnica -->
<section style="background: rgba(255, 255, 255, 0.98); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 10px 40px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.3);">
    <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50; text-shadow: none;">Análise Técnica</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center;">
            <h3 style="color: #e67e22; margin-bottom: 1rem; font-weight: 600;">RPM Médio por Marca</h3>
            {{ grafico_rpm|safe }}
        </div>
        <div style="text-align: center;">
            <h3 style="color: #34495e; margin-bottom: 1rem; font-weight: 600;">Quilometragem vs Consumo</h3>
            {{ grafico_scatter|safe }}
        </div>
    </div>
</section>

<!-- Seção: Análise Avançada -->
<section style="background: rgba(255, 255, 255, 0.98); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 10px 40px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.3);">
    <h2 style="text-align: center; margin-bottom: 2rem; color: #2c3e50; text-shadow: none;">Análise Avançada</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr)); gap: 1.5rem;">
        <div style="text-align: center;">
            <h3 style="color: #8e44ad; margin-bottom: 1rem; font-weight: 600;">Matriz de Correlação</h3>
            {{ grafico_heatmap|safe }}
        </div>
        <div style="text-align: center;">
            <h3 style="color: #2980b9; margin-bottom: 1rem; font-weight: 600;">Radar de Performance</h3>
            {{ grafico_radar|safe }}
        </div>
    </div>
    <div style="display: flex; justify-content: center; margin-top: 1.5rem;">
        <div style="text-align: center; width: 100%; max-width: 500px;">
            <h3 style="color: #16a085; margin-bottom: 1rem; font-weight: 600;">Tendência de Consumo</h3>
            {{ grafico_area|safe }}
        </div>
    </div>
</section>

<!-- Insights Section -->
<section style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); border-radius: 15px; padding: 2rem; margin-bottom: 2rem; color: white; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);">
    <h2 style="text-align: center; margin-bottom: 2rem; color: white; font-weight: 700;">Insights dos Dados</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
        <div style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2);">
            <h4 style="margin: 0 0 1rem 0; color: #2ecc71; font-weight: 600;">Sustentabilidade</h4>
            <p style="color: rgba(255,255,255,0.9); line-height: 1.6;">Compare as emissões de CO₂ entre marcas para identificar veículos mais sustentáveis e oportunidades de redução do impacto ambiental.</p>
        </div>
        <div style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2);">
            <h4 style="margin: 0 0 1rem 0; color: #e74c3c; font-weight: 600;">Economia</h4>
            <p style="color: rgba(255,255,255,0.9); line-height: 1.6;">Analise o consumo e eficiência para otimizar custos operacionais e identificar veículos que precisam de manutenção.</p>
        </div>
        <div style="background: rgba(255,255,255,0.15); padding: 1.5rem; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2);">
            <h4 style="margin: 0 0 1rem 0; color: #3498db; font-weight: 600;">Performance</h4>
            <p style="color: rgba(255,255,255,0.9); line-height: 1.6;">Use dados de velocidade e RPM para otimizar rotas, treinar motoristas e melhorar a eficiência operacional.</p>
        </div>
    </div>
</section>
{% endblock %}